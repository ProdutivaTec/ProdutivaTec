<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard</title>
    <link rel="stylesheet" href="./css/dashboard.css">
    <link rel="stylesheet" href="./css/notificações.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

</head>

<body onload="validarSessao()">
    <section class="container">
        <aside class="sidebar">
            <div class="imgDash" id="theme-dash">
                <img src="./assets/img/LOGO.png" id="theme-logo" alt="Logo">
            </div>
            <br>
            <div class="divMenu">
                <div class="menu-item">
                    <img class="icon" src="./assets/icon/Dash.png" alt="Dashboards Icon">
                    Dashboards
                </div>
                <div class="menu-item" id="openModalBtn">
                    <img class="icon" src="./assets/icon/Notificações.png" alt="Notificações Icon">
                    Notificações
                </div>
                <a href="./calendario.html">
                    <div class="menu-item">
                        <img class="icon" src="./assets/icon/calendario (1) 1.png" alt="Suporte - IA Icon">
                        Eventos
                    </div>
                </a>
                <a href="http://localhost:8080">
                    <div class="menu-item">
                        <img class="icon" src="./assets/icon/Suporte.png" alt="Suporte - IA Icon">
                        Suporte - IA
                    </div>
                </a>
                <div class="menu-item">
                    <img class="icon" src="./assets/icon/Configurações.png" alt="Configurações Icon">
                    Configurações
                </div>
            </div>
            <div class="itemExit">
                <p class="pSidebar">Sair</p>
                <img class="iconE" src="./assets/icon/Sair.png" alt="Sair Icon">
            </div>
        </aside>

        <header class="headerDash">
            <div class="headerRight">
                <div class="funcionalidadesHeader" id="theme-toggle">
                    <img src="./assets/icon/Light.png" alt="Tema Claro" id="theme-icon">
                </div>
                <div class="vertical"></div>
                <div class="funcionalidadesHeader" id="theme-header1">
                    <img src="./assets/icon/image 35.png" id="theme-noti" alt="">
                </div>
                <div class="funcionalidadesHeader" id="theme-header2">
                    <img src="./assets/icon/image 34.png" id="theme-confg" alt="">
                </div>
                <div class="vertical"></div>
            </div>
        </header>

        <section class="graficosDash">
            <div class="textEmpresa">
                <Span class="tittleEmpresa">FINANCEIRO</Span>
                <p class="subtittleEmpresa">GRANDE PORTE - acima de 400 colaboradores</p>
            </div>
            <div class="dashTop">
                <div class="KPI1" id="KPI1">
                    <p class="subtittleEmpresa">GENÊRO</p>
                    <div class="infoKPI1">
                        <div class="qtdPessoas">
                            <Span class="tittleEmpresa"> 4.588</Span>
                            <p>MASCULINO</p>
                        </div>
                        <img src="./assets/icon/banheiro 1.png" alt="">
                        <hr>
                        <img src="./assets/icon/banheiro 2.png" alt="">
                        <div class="qtdPessoas">
                            <Span class="tittleEmpresa"> 2.475</Span>
                            <p>FEMININO</p>
                        </div>
                    </div>
                </div>
                <div class="KPI2">
                    <Span class="tittleEmpresa"> 90%</Span>
                    <p>RESPONDERAM SUA <br> PESQUISA</p>
                </div>

                <div class="area2Kpis">
                    <div class="KPI3">
                        <img src="./assets/icon/felicidade (1) 1.png" alt="">

                        <div class="satisfacao">
                            <Span class="tittleEmpresa"> 75%</Span>
                            <p>SATISFEITOS</p>
                        </div>
                    </div>
                    <div class="KPI3">
                        <img src="./assets/icon/triste (1) 1.png" alt="">
                        <div class="satisfacao">
                            <Span class="tittleEmpresa"> 25%</Span>
                            <p>INSATISFEITOS</p>
                        </div>
                    </div>
                </div>
                <div class="KPI22">
                    <Span class="tittleEmpresa">48%</Span>
                    <p class="subtittleEmpresa">RECOMENDARIAM SUA <br>EMPRESA</p>
                </div>
            </div>


            <div class="dashBottom">
                <div class="KPI6">

                </div>
                <div class="KPI4">
                </div>
                <div class="KPI5">
                    <!-- <p class="tittleEmpresa">Selecione o PIOR aspecto do trabalho</p> -->
                    <canvas id="GraficoPiorAspecto" width="400" height="300"></canvas>

                </div>
            </div>
        </section>

    </section>

    <div id="myModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>Notificações</h2>
            <table>
                <tr>
                    <th>Tipo</th>
                    <th>Evento</th>
                    <th>+Notificações</th>
                </tr>
                <tr>
                    <td>15155</td>
                    <td>Lorem ipsum</td>
                    <td>email</td>
                </tr>
                <tr>
                    <td>18623</td>
                    <td>Lorem ipsum</td>
                    <td>email</td>
                </tr>
                <tr>
                    <td>15155</td>
                    <td>Lorem ipsum</td>
                    <td>email</td>
                </tr>
                <tr>
                <tr>
                    <td>15155</td>
                    <td>Lorem ipsum</td>
                    <td>email</td>
                </tr>
                <tr>
                <tr>
                    <td>15155</td>
                    <td>Lorem ipsum</td>
                    <td>email</td>
                </tr>
                <tr>
                <tr>
                    <td>15155</td>
                    <td>Lorem ipsum</td>
                    <td>email</td>
                </tr>
                <tr>

                    <!-- Mais notificações aqui -->
            </table>
        </div>
    </div>


</body>

</html>

<script src="../public/js/dashboard.js"></script>
<script src="./js/modal.js"></script>



<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels"></script>


<script>
    const labels = ['Managers', 'Sales', 'Chief Executives', 'Education Professionals', 'Construction Trades', 'Hospitality'];
    const data = {
        labels: labels,
        datasets: [{
            data: [3, 8, 16, 20, 12, 17],
            backgroundColor: [
                'rgb(54, 162, 235)',
                'rgb(75, 192, 192)',
                'rgb(153, 102, 255)',
                'rgb(255, 159, 64)',
                'rgb(255, 99, 132)',
                'rgb(255, 205, 86)'
            ],
            borderWidth: 1
        }]
    };

    document.addEventListener('DOMContentLoaded', function () {
        const ctx = document.getElementById('GraficoPiorAspecto').getContext('2d');
        const myChart = new Chart(ctx, {
            type: 'pie',
            data: data,
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        display: false // Remove a legenda fora do gráfico
                    },
                    datalabels: {
                        color: '#000', // Cor do texto
                        formatter: (value, ctx) => {
                            let label = ctx.chart.data.labels[ctx.dataIndex];
                            return label + ' ' + value; // Exibe o rótulo e o valor
                        },
                        anchor: 'end', // Alinha fora do gráfico
                        align: 'end', // Alinha os rótulos ao final da linha
                        clamp: true, // Garante que o rótulo não ultrapasse os limites do gráfico
                        offset: 10, // Afasta do centro para posicionar fora
                        textAlign: 'center',
                        font: {
                            weight: 'normal',
                            size: 10 // Tamanho menor do texto
                        },
                        padding: 0, // Remove o preenchimento
                        labels: {
                            outside: {
                                textAlign: 'left'
                            }
                        }
                    }
                }
            },
            plugins: [ChartDataLabels] // Ativando o plugin de rótulos
        });
    });
</script>